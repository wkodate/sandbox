システムの保守
===

### ソースからのmakeによるインストール

* ビルド
    * プログラムをソースコードから実行可能なバイナリファイルにするための、コンパイル、リンクといった一連の作業
    * https://www.atmarkit.co.jp/ait/articles/1105/23/news128.html
* make
    * ビルドツール
    * Makefileをもとにビルド、インストール作業を自動化する
    * GNUmakefile, makefile, Makefileの順でファイルの検索をする。Makefileが多く用いられる
    * コンパイルからインストールまでの実行順序
        * ./configure
            * 環境をチェックし、環境にあわせたMakfileを作成
            * --prefixを使えばインストール先を指定できる
        * make
            * ソースファイルから実行ファイルを生成(コンパイル)
            * 実行ファイルやライブラリを作成
        * su (必要に応じて)
        * make install
            * ファイルを適切なディレクトリにインストールする
    * Makefile
        * 
* tar
    * ファイルのアーカイブ。ファイルの圧縮はしない
    * cオプション アーカイブ作成。create
    * xオプション アーカイブを展開。extract
* patch
    * パッチの適用の失敗した場合は、.rejというファイルに出力される
    * patch-kernelで複数のパッチを一気に適用する
    * カーネルバージョン4.xのパッチ4.x.yは、4.xと4.x.yの差分
    * -pオプション パッチファイル内のパスをそのまま用いる
    * -dオプション 作業ディレクトリを指定
    * -Rオプション パッチを逆向きに適用して変更を取り消す
    * https://www.atmarkit.co.jp/ait/articles/1705/12/news016.html
    
### バックアップ操作

* rsync
    * ネットワーク経由でデータをコピーできるコマンド
    * --deleteオプション 送信元で削除したファイルを送信先でも削除するオプション
    * https://www.itmedia.co.jp/enterprise/articles/0804/21/news013.html
* mt
    * テーブドライブを制御するコマンド。磁気テープなどのテープデバイスを早送りしたり、巻き戻ししたりする
    * /dev/nst0は自動巻き戻ししない、/dev/st0は自動巻き戻しする
* バックアップ
    * フルバックアップ
        * 必要なデータをすべて複製。バックアップに時間がかかり、バックアップ先に大きな容量が必要
    * 差分バックアップ
        * 新たに作成されたファイルや変更があったファイルのみを複製
        * 復元にはフルバックアップと最新の差分バックアップが必要
    * 増分バックアップ
        * 前回のフルバックアップもしくは増分バックアップ以降、新たに作成されたファイルや変更があったファイルのみを複製。バックアップにかかる時間は短い
        * 復元にはフルバックアップとすべての増分バックアップが必要
* オープンソースのバックアップ
    * Amanda, Bacula, BackupPC
